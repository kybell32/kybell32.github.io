<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>실험 v2 · Page 6 (조작 점검)</title>
<style>
  :root{--line:#e5e7eb;--pri:#2563eb;--muted:#6b7280}
  body{margin:0;background:#fff;font-family:system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Noto Sans KR,Arial,sans-serif;color:#111827;line-height:1.6}
  header{position:sticky;top:0;background:#fff;border-bottom:1px solid var(--line);padding:12px;text-align:center;font-weight:700}
  main{max-width:880px;margin:0 auto;padding:18px}
  h1{font-size:20px;margin:6px 0 18px}
  table{border-collapse:collapse;width:100%;margin-top:12px;table-layout:fixed}
  th,td{border:1px solid var(--line);padding:8px;text-align:center;word-wrap:break-word}
  th{background:#f9fafb}
  td label{display:block;cursor:pointer}
  .btn-area{text-align:center;margin-top:24px}
  .btn{border:none;border-radius:10px;padding:12px 20px;font-size:16px;background:var(--pri);color:#fff;font-weight:600;cursor:pointer}
  .btn:disabled{opacity:.5;cursor:not-allowed}
</style>
</head>
<body>
<header>조작 점검</header>
<main>
  <h1>앞서 본 온라인 게시물은 어조가 어떻다고 보십니까?<br/>아래 내용에 대해 동의하는 정도를 선택해 주십시오.</h1>

  <form id="form">
    <table>
      <colgroup>
        <col style="width:40%">
        <col style="width:12%">
        <col style="width:12%">
        <col style="width:12%">
        <col style="width:12%">
        <col style="width:12%">
      </colgroup>
      <thead>
        <tr>
          <th>문항</th>
          <th>전혀 그렇지 않다 (1)</th>
          <th>그렇지 않다 (2)</th>
          <th>보통이다 (3)</th>
          <th>그렇다 (4)</th>
          <th>매우 그렇다 (5)</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>웃기다.</td>
          <td><label><input type="radio" name="q1" value="1"></label></td>
          <td><label><input type="radio" name="q1" value="2"></label></td>
          <td><label><input type="radio" name="q1" value="3"></label></td>
          <td><label><input type="radio" name="q1" value="4"></label></td>
          <td><label><input type="radio" name="q1" value="5"></label></td>
        </tr>
        <tr>
          <td>재미있다.</td>
          <td><label><input type="radio" name="q2" value="1"></label></td>
          <td><label><input type="radio" name="q2" value="2"></label></td>
          <td><label><input type="radio" name="q2" value="3"></label></td>
          <td><label><input type="radio" name="q2" value="4"></label></td>
          <td><label><input type="radio" name="q2" value="5"></label></td>
        </tr>
        <tr>
          <td>농담조가 강하다.</td>
          <td><label><input type="radio" name="q3" value="1"></label></td>
          <td><label><input type="radio" name="q3" value="2"></label></td>
          <td><label><input type="radio" name="q3" value="3"></label></td>
          <td><label><input type="radio" name="q3" value="4"></label></td>
          <td><label><input type="radio" name="q3" value="5"></label></td>
        </tr>
      </tbody>
    </table>
    <div class="btn-area">
      <button id="nextBtn" type="button" class="btn" disabled>다음</button>
    </div>
  </form>
</main>

<script>
/***** ▼ 설정 ▼ *****/
const LOG_ENDPOINT = "https://script.google.com/macros/s/AKfycbz4L7LVxclV8VCzzNR7zjVh1gzD_wZPfs2HFXE_JVyowsYgzECbKLPcvyTCYR9sg_rH/exec";
const NEXT_PAGE_URL = "page7.html";
/***** ▲ 설정 끝 ▲ *****/

(function(){
  const startMs = performance.now();
  const pid = localStorage.getItem('exp_pid') || new URLSearchParams(location.search).get('pid') || null;
  const nextBtn = document.getElementById('nextBtn');
  const form = document.getElementById('form');

  function allAnswered(){
    return ['q1','q2','q3'].every(q=>form.querySelector(`input[name="${q}"]:checked`));
  }

  form.addEventListener('change', ()=>{
    nextBtn.disabled = !allAnswered();
  });

  async function log(type, detail){
    const payload = {type, ts:new Date().toISOString(), ms:Math.round(performance.now()-startMs), pid, url:location.href, ua:navigator.userAgent, detail};
    try{ await fetch(LOG_ENDPOINT,{method:'POST',mode:'no-cors',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});}catch(e){ try{navigator.sendBeacon && navigator.sendBeacon(LOG_ENDPOINT,new Blob([JSON.stringify(payload)],{type:'application/json'}));}catch(_){}}
  }

  log('page_load',{page:6});

  nextBtn.addEventListener('click', async ()=>{
    const ans = {
      q1: form.q1.value,
      q2: form.q2.value,
      q3: form.q3.value
    };
    await log('manipulation_check_submit', ans);
    location.href = NEXT_PAGE_URL + (pid?`?pid=${encodeURIComponent(pid)}`:'');
  });
})();
</script>
</body>
</html>
