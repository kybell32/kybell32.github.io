<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>실험 v2 · Page 7 (설문 단계)</title>
<style>
  :root{--line:#e5e7eb;--pri:#2563eb;--muted:#6b7280}
  *{box-sizing:border-box}
  body{margin:0;background:#f6f7f9;font-family:system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Noto Sans KR,Arial,sans-serif;color:#111827;line-height:1.6}
  header{position:sticky;top:0;background:#fff;border-bottom:1px solid var(--line);padding:12px;text-align:center;font-weight:700}
  main{max-width:980px;margin:0 auto;padding:18px}
  h1{font-size:20px;margin:6px 0 12px}
  .muted{color:#111827;font-weight:700;margin:0 0 10px}
  table{border-collapse:collapse;width:100%;margin-top:12px;table-layout:fixed}
  th,td{border:1px solid var(--line);padding:8px;text-align:center;word-wrap:break-word}
  th{background:#f9fafb}
  td:first-child, th:first-child{text-align:left}
  td label{display:block;cursor:pointer}
  .section{margin:14px 0 28px;background:#fff;border:1px solid var(--line);border-radius:12px;box-shadow:0 2px 12px rgba(0,0,0,.04);padding:14px 16px}
  .btn-area{text-align:center;margin-top:24px}
  .btn{border:none;border-radius:10px;padding:12px 20px;font-size:16px;background:var(--pri);color:#fff;font-weight:600;cursor:pointer}
  .btn:disabled{opacity:.5;cursor:not-allowed}
</style>
</head>
<body>
<header>설문 단계</header>
<main>
  <h1>아래 문항에 응답해 주세요. 모든 문항에 응답해야 다음으로 이동할 수 있습니다.</h1>

  <!-- 섹션 1 -->
  <section class="section">
    <p class="muted">지난 2주 동안 소셜 미디어 사용에 대해 자신과 일치하는 정도를 표시해 주십시오.</p>
    <form id="sec1">
      <table>
        <colgroup>
          <col style="width:40%">
          <col style="width:12%"><col style="width:12%"><col style="width:12%"><col style="width:12%"><col style="width:12%">
        </colgroup>
        <thead>
          <tr>
            <th>내용</th>
            <th>매우 아니다 (1)</th>
            <th>아니다 (2)</th>
            <th>보통이다 (3)</th>
            <th>그렇다 (4)</th>
            <th>매우 그렇다 (5)</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>소셜 미디어에 대해 생각하거나 사용계획을 세우는 데 많은 시간을 보냈습니까?</td><td><label><input type="radio" name="s1_q1" value="1" data-qkey="P7_S1_Q1"></label></td><td><label><input type="radio" name="s1_q1" value="2" data-qkey="P7_S1_Q1"></label></td><td><label><input type="radio" name="s1_q1" value="3" data-qkey="P7_S1_Q1"></label></td><td><label><input type="radio" name="s1_q1" value="4" data-qkey="P7_S1_Q1"></label></td><td><label><input type="radio" name="s1_q1" value="5" data-qkey="P7_S1_Q1"></label></td></tr>
          <tr><td>소셜 미디어를 점점 더 많이 하고 싶다는 충동을 느꼈습니까?</td><td><label><input type="radio" name="s1_q2" value="1" data-qkey="P7_S1_Q2"></label></td><td><label><input type="radio" name="s1_q2" value="2" data-qkey="P7_S1_Q2"></label></td><td><label><input type="radio" name="s1_q2" value="3" data-qkey="P7_S1_Q2"></label></td><td><label><input type="radio" name="s1_q2" value="4" data-qkey="P7_S1_Q2"></label></td><td><label><input type="radio" name="s1_q2" value="5" data-qkey="P7_S1_Q2"></label></td></tr>
          <tr><td>개인적인 문제를 잊기 위해 소셜 미디어를 사용했습니까?</td><td><label><input type="radio" name="s1_q3" value="1" data-qkey="P7_S1_Q3"></label></td><td><label><input type="radio" name="s1_q3" value="2" data-qkey="P7_S1_Q3"></label></td><td><label><input type="radio" name="s1_q3" value="3" data-qkey="P7_S1_Q3"></label></td><td><label><input type="radio" name="s1_q3" value="4" data-qkey="P7_S1_Q3"></label></td><td><label><input type="radio" name="s1_q3" value="5" data-qkey="P7_S1_Q3"></label></td></tr>
          <tr><td>소셜 미디어 사용을 줄이려고 시도했지만 성공하지 못했습니까?</td><td><label><input type="radio" name="s1_q4" value="1" data-qkey="P7_S1_Q4"></label></td><td><label><input type="radio" name="s1_q4" value="2" data-qkey="P7_S1_Q4"></label></td><td><label><input type="radio" name="s1_q4" value="3" data-qkey="P7_S1_Q4"></label></td><td><label><input type="radio" name="s1_q4" value="4" data-qkey="P7_S1_Q4"></label></td><td><label><input type="radio" name="s1_q4" value="5" data-qkey="P7_S1_Q4"></label></td></tr>
          <tr><td>소셜 미디어를 사용하지 못하게 되면 안절부절 못하거나 괴로웠습니까?</td><td><label><input type="radio" name="s1_q5" value="1" data-qkey="P7_S1_Q5"></label></td><td><label><input type="radio" name="s1_q5" value="2" data-qkey="P7_S1_Q5"></label></td><td><label><input type="radio" name="s1_q5" value="3" data-qkey="P7_S1_Q5"></label></td><td><label><input type="radio" name="s1_q5" value="4" data-qkey="P7_S1_Q5"></label></td><td><label><input type="radio" name="s1_q5" value="5" data-qkey="P7_S1_Q5"></label></td></tr>
          <tr><td>너무 많이 소셜 미디어를 사용해서 일이나 학업에 부정적인 영향이 있었습니까?</td><td><label><input type="radio" name="s1_q6" value="1" data-qkey="P7_S1_Q6"></label></td><td><label><input type="radio" name="s1_q6" value="2" data-qkey="P7_S1_Q6"></label></td><td><label><input type="radio" name="s1_q6" value="3" data-qkey="P7_S1_Q6"></label></td><td><label><input type="radio" name="s1_q6" value="4" data-qkey="P7_S1_Q6"></label></td><td><label><input type="radio" name="s1_q6" value="5" data-qkey="P7_S1_Q6"></label></td></tr>
        </tbody>
      </table>
    </form>
  </section>

  <!-- 섹션 2 -->
  <section class="section">
    <p class="muted">제시된 문항을 읽고 동의하는 정도에 따라 하나만 표시해 주십시오.</p>
    <form id="sec2">
      <table>
        <colgroup>
          <col style="width:40%">
          <col style="width:12%"><col style="width:12%"><col style="width:12%"><col style="width:12%"><col style="width:12%">
        </colgroup>
        <thead>
          <tr>
            <th>내용</th>
            <th>매우 아니다 (1)</th>
            <th>아니다 (2)</th>
            <th>보통이다 (3)</th>
            <th>그렇다 (4)</th>
            <th>매우 그렇다 (5)</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>이상적인 사회에서 어떤 집단은 상위에 있고 다른 집단은 하위에 위치하는 것이 필요하다.</td><td><label><input type="radio" name="s2_q1" value="1" data-qkey="P7_S2_Q1"></label></td><td><label><input type="radio" name="s2_q1" value="2" data-qkey="P7_S2_Q1"></label></td><td><label><input type="radio" name="s2_q1" value="3" data-qkey="P7_S2_Q1"></label></td><td><label><input type="radio" name="s2_q1" value="4" data-qkey="P7_S2_Q1"></label></td><td><label><input type="radio" name="s2_q1" value="5" data-qkey="P7_S2_Q1"></label></td></tr>
          <tr><td>어떤 집단은 다른 집단에 비해 열등하다.</td><td><label><input type="radio" name="s2_q2" value="1" data-qkey="P7_S2_Q2"></label></td><td><label><input type="radio" name="s2_q2" value="2" data-qkey="P7_S2_Q2"></label></td><td><label><input type="radio" name="s2_q2" value="3" data-qkey="P7_S2_Q2"></label></td><td><label><input type="radio" name="s2_q2" value="4" data-qkey="P7_S2_Q2"></label></td><td><label><input type="radio" name="s2_q2" value="5" data-qkey="P7_S2_Q2"></label></td></tr>
          <tr><td>*어떤 집단도 사회에서 지배적이고 위치를 차지해서는 안 된다.</td><td><label><input type="radio" name="s2_q3" value="1" data-qkey="P7_S2_Q3"></label></td><td><label><input type="radio" name="s2_q3" value="2" data-qkey="P7_S2_Q3"></label></td><td><label><input type="radio" name="s2_q3" value="3" data-qkey="P7_S2_Q3"></label></td><td><label><input type="radio" name="s2_q3" value="4" data-qkey="P7_S2_Q3"></label></td><td><label><input type="radio" name="s2_q3" value="5" data-qkey="P7_S2_Q3"></label></td></tr>
          <tr><td>*사회의 하위 그룹도 상위 그룹만큼 자격이 있다.</td><td><label><input type="radio" name="s2_q4" value="1" data-qkey="P7_S2_Q4"></label></td><td><label><input type="radio" name="s2_q4" value="2" data-qkey="P7_S2_Q4"></label></td><td><label><input type="radio" name="s2_q4" value="3" data-qkey="P7_S2_Q4"></label></td><td><label><input type="radio" name="s2_q4" value="4" data-qkey="P7_S2_Q4"></label></td><td><label><input type="radio" name="s2_q4" value="5" data-qkey="P7_S2_Q4"></label></td></tr>
          <tr><td>집단 간 평등이 우리 사회의 주된 가치가 되어서는 안 된다.</td><td><label><input type="radio" name="s2_q5" value="1" data-qkey="P7_S2_Q5"></label></td><td><label><input type="radio" name="s2_q5" value="2" data-qkey="P7_S2_Q5"></label></td><td><label><input type="radio" name="s2_q5" value="3" data-qkey="P7_S2_Q5"></label></td><td><label><input type="radio" name="s2_q5" value="4" data-qkey="P7_S2_Q5"></label></td><td><label><input type="radio" name="s2_q5" value="5" data-qkey="P7_S2_Q5"></label></td></tr>
          <tr><td>집단들을 평등하게 만들려고 노력하는 것은 부당하다.</td><td><label><input type="radio" name="s2_q6" value="1" data-qkey="P7_S2_Q6"></label></td><td><label><input type="radio" name="s2_q6" value="2" data-qkey="P7_S2_Q6"></label></td><td><label><input type="radio" name="s2_q6" value="3" data-qkey="P7_S2_Q6"></label></td><td><label><input type="radio" name="s2_q6" value="4" data-qkey="P7_S2_Q6"></label></td><td><label><input type="radio" name="s2_q6" value="5" data-qkey="P7_S2_Q6"></label></td></tr>
          <tr><td>*우리는 다양한 집단의 조건을 평등하게 만들기 위해 할 수 있는 것을 해야 한다.</td><td><label><input type="radio" name="s2_q7" value="1" data-qkey="P7_S2_Q7"></label></td><td><label><input type="radio" name="s2_q7" value="2" data-qkey="P7_S2_Q7"></label></td><td><label><input type="radio" name="s2_q7" value="3" data-qkey="P7_S2_Q7"></label></td><td><label><input type="radio" name="s2_q7" value="4" data-qkey="P7_S2_Q7"></label></td><td><label><input type="radio" name="s2_q7" value="5" data-qkey="P7_S2_Q7"></label></td></tr>
          <tr><td>*모든 집단은 성공할 수 있는 동등한 기회를 부여 받아야 한다.</td><td><label><input type="radio" name="s2_q8" value="1" data-qkey="P7_S2_Q8"></label></td><td><label><input type="radio" name="s2_q8" value="2" data-qkey="P7_S2_Q8"></label></td><td><label><input type="radio" name="s2_q8" value="3" data-qkey="P7_S2_Q8"></label></td><td><label><input type="radio" name="s2_q8" value="4" data-qkey="P7_S2_Q8"></label></td><td><label><input type="radio" name="s2_q8" value="5" data-qkey="P7_S2_Q8"></label></td></tr>
        </tbody>
      </table>
    </form>
  </section>

  <!-- 섹션 3 -->
  <section class="section">
    <p class="muted">아래 문장 내용과 얼마나 일치한다고 보시는지 선택해 주십시오.</p>
    <form id="sec3">
      <table>
        <colgroup>
          <col style="width:32%">
          <col style="width:9.714%"><col style="width:9.714%"><col style="width:9.714%"><col style="width:9.714%"><col style="width:9.714%"><col style="width:9.714%"><col style="width:9.716%">
        </colgroup>
        <thead>
          <tr>
            <th>내용</th>
            <th>전혀<br/>그렇지 않다 (1)</th>
            <th>그렇지 않다 (2)</th>
            <th>별로<br/>그렇지 않다 (3)</th>
            <th>보통이다 (4)</th>
            <th>약간<br/>그렇다 (5)</th>
            <th>그렇다 (6)</th>
            <th>매우<br/>그렇다 (7)</th>
          </tr>
        </thead>
        <tbody>
          <!-- *표시(역채점 문항)도 그대로 원점수 저장합니다(채점은 시트/분석 단계에서 처리). -->
          <tr><td>*정서적이고 따뜻하다.</td><td><input type="radio" name="s3_q1" value="1" data-qkey="P7_S3_Q1"></td><td><input type="radio" name="s3_q1" value="2" data-qkey="P7_S3_Q1"></td><td><input type="radio" name="s3_q1" value="3" data-qkey="P7_S3_Q1"></td><td><input type="radio" name="s3_q1" value="4" data-qkey="P7_S3_Q1"></td><td><input type="radio" name="s3_q1" value="5" data-qkey="P7_S3_Q1"></td><td><input type="radio" name="s3_q1" value="6" data-qkey="P7_S3_Q1"></td><td><input type="radio" name="s3_q1" value="7" data-qkey="P7_S3_Q1"></td></tr>
          <tr><td>*따뜻함이 느껴진다.</td><td><input type="radio" name="s3_q2" value="1" data-qkey="P7_S3_Q2"></td><td><input type="radio" name="s3_q2" value="2" data-qkey="P7_S3_Q2"></td><td><input type="radio" name="s3_q2" value="3" data-qkey="P7_S3_Q2"></td><td><input type="radio" name="s3_q2" value="4" data-qkey="P7_S3_Q2"></td><td><input type="radio" name="s3_q2" value="5" data-qkey="P7_S3_Q2"></td><td><input type="radio" name="s3_q2" value="6" data-qkey="P7_S3_Q2"></td><td><input type="radio" name="s3_q2" value="7" data-qkey="P7_S3_Q2"></td></tr>
          <tr><td>*열린 마음/분명한 사고.</td><td><input type="radio" name="s3_q3" value="1" data-qkey="P7_S3_Q3"></td><td><input type="radio" name="s3_q3" value="2" data-qkey="P7_S3_Q3"></td><td><input type="radio" name="s3_q3" value="3" data-qkey="P7_S3_Q3"></td><td><input type="radio" name="s3_q3" value="4" data-qkey="P7_S3_Q3"></td><td><input type="radio" name="s3_q3" value="5" data-qkey="P7_S3_Q3"></td><td><input type="radio" name="s3_q3" value="6" data-qkey="P7_S3_Q3"></td><td><input type="radio" name="s3_q3" value="7" data-qkey="P7_S3_Q3"></td></tr>
          <tr><td>깊이가 없다.</td><td><input type="radio" name="s3_q4" value="1" data-qkey="P7_S3_Q4"></td><td><input type="radio" name="s3_q4" value="2" data-qkey="P7_S3_Q4"></td><td><input type="radio" name="s3_q4" value="3" data-qkey="P7_S3_Q4"></td><td><input type="radio" name="s3_q4" value="4" data-qkey="P7_S3_Q4"></td><td><input type="radio" name="s3_q4" value="5" data-qkey="P7_S3_Q4"></td><td><input type="radio" name="s3_q4" value="6" data-qkey="P7_S3_Q4"></td><td><input type="radio" name="s3_q4" value="7" data-qkey="P7_S3_Q4"></td></tr>
          <tr><td>기계적이고 차갑다.</td><td><input type="radio" name="s3_q5" value="1" data-qkey="P7_S3_Q5"></td><td><input type="radio" name="s3_q5" value="2" data-qkey="P7_S3_Q5"></td><td><input type="radio" name="s3_q5" value="3" data-qkey="P7_S3_Q5"></td><td><input type="radio" name="s3_q5" value="4" data-qkey="P7_S3_Q5"></td><td><input type="radio" name="s3_q5" value="5" data-qkey="P7_S3_Q5"></td><td><input type="radio" name="s3_q5" value="6" data-qkey="P7_S3_Q5"></td><td><input type="radio" name="s3_q5" value="7" data-qkey="P7_S3_Q5"></td></tr>
          <tr><td>물체처럼 느껴진다.</td><td><input type="radio" name="s3_q6" value="1" data-qkey="P7_S3_Q6"></td><td><input type="radio" name="s3_q6" value="2" data-qkey="P7_S3_Q6"></td><td><input type="radio" name="s3_q6" value="3" data-qkey="P7_S3_Q6"></td><td><input type="radio" name="s3_q6" value="4" data-qkey="P7_S3_Q6"></td><td><input type="radio" name="s3_q6" value="5" data-qkey="P7_S3_Q6"></td><td><input type="radio" name="s3_q6" value="6" data-qkey="P7_S3_Q6"></td><td><input type="radio" name="s3_q6" value="7" data-qkey="P7_S3_Q6"></td></tr>
          <tr><td>*세련되고 교양 있다.</td><td><input type="radio" name="s3_q7" value="1" data-qkey="P7_S3_Q7"></td><td><input type="radio" name="s3_q7" value="2" data-qkey="P7_S3_Q7"></td><td><input type="radio" name="s3_q7" value="3" data-qkey="P7_S3_Q7"></td><td><input type="radio" name="s3_q7" value="4" data-qkey="P7_S3_Q7"></td><td><input type="radio" name="s3_q7" value="5" data-qkey="P7_S3_Q7"></td><td><input type="radio" name="s3_q7" value="6" data-qkey="P7_S3_Q7"></td><td><input type="radio" name="s3_q7" value="7" data-qkey="P7_S3_Q7"></td></tr>
          <tr><td>*어른스럽게 느껴진다.</td><td><input type="radio" name="s3_q8" value="1" data-qkey="P7_S3_Q8"></td><td><input type="radio" name="s3_q8" value="2" data-qkey="P7_S3_Q8"></td><td><input type="radio" name="s3_q8" value="3" data-qkey="P7_S3_Q8"></td><td><input type="radio" name="s3_q8" value="4" data-qkey="P7_S3_Q8"></td><td><input type="radio" name="s3_q8" value="5" data-qkey="P7_S3_Q8"></td><td><input type="radio" name="s3_q8" value="6" data-qkey="P7_S3_Q8"></td><td><input type="radio" name="s3_q8" value="7" data-qkey="P7_S3_Q8"></td></tr>
          <tr><td>*자제력이 있다.</td><td><input type="radio" name="s3_q9" value="1" data-qkey="P7_S3_Q9"></td><td><input type="radio" name="s3_q9" value="2" data-qkey="P7_S3_Q9"></td><td><input type="radio" name="s3_q9" value="3" data-qkey="P7_S3_Q9"></td><td><input type="radio" name="s3_q9" value="4" data-qkey="P7_S3_Q9"></td><td><input type="radio" name="s3_q9" value="5" data-qkey="P7_S3_Q9"></td><td><input type="radio" name="s3_q9" value="6" data-qkey="P7_S3_Q9"></td><td><input type="radio" name="s3_q9" value="7" data-qkey="P7_S3_Q9"></td></tr>
          <tr><td>*지적이고 논리적이다.</td><td><input type="radio" name="s3_q10" value="1" data-qkey="P7_S3_Q10"></td><td><input type="radio" name="s3_q10" value="2" data-qkey="P7_S3_Q10"></td><td><input type="radio" name="s3_q10" value="3" data-qkey="P7_S3_Q10"></td><td><input type="radio" name="s3_q10" value="4" data-qkey="P7_S3_Q10"></td><td><input type="radio" name="s3_q10" value="5" data-qkey="P7_S3_Q10"></td><td><input type="radio" name="s3_q10" value="6" data-qkey="P7_S3_Q10"></td><td><input type="radio" name="s3_q10" value="7" data-qkey="P7_S3_Q10"></td></tr>
          <tr><td>인간보다 못한 동물처럼 느껴진다.</td><td><input type="radio" name="s3_q11" value="1" data-qkey="P7_S3_Q11"></td><td><input type="radio" name="s3_q11" value="2" data-qkey="P7_S3_Q11"></td><td><input type="radio" name="s3_q11" value="3" data-qkey="P7_S3_Q11"></td><td><input type="radio" name="s3_q11" value="4" data-qkey="P7_S3_Q11"></td><td><input type="radio" name="s3_q11" value="5" data-qkey="P7_S3_Q11"></td><td><input type="radio" name="s3_q11" value="6" data-qkey="P7_S3_Q11"></td><td><input type="radio" name="s3_q11" value="7" data-qkey="P7_S3_Q11"></td></tr>
          <tr><td>세련되지 못하다.</td><td><input type="radio" name="s3_q12" value="1" data-qkey="P7_S3_Q12"></td><td><input type="radio" name="s3_q12" value="2" data-qkey="P7_S3_Q12"></td><td><input type="radio" name="s3_q12" value="3" data-qkey="P7_S3_Q12"></td><td><input type="radio" name="s3_q12" value="4" data-qkey="P7_S3_Q12"></td><td><input type="radio" name="s3_q12" value="5" data-qkey="P7_S3_Q12"></td><td><input type="radio" name="s3_q12" value="6" data-qkey="P7_S3_Q12"></td><td><input type="radio" name="s3_q12" value="7" data-qkey="P7_S3_Q12"></td></tr>
        </tbody>
      </table>
    </form>
  </section>

  <div class="btn-area">
    <button id="nextBtn" class="btn" disabled>다음</button>
  </div>
</main>

<script>
/***** ▼ 설정 ▼ *****/
const API = "https://script.google.com/macros/s/AKfycbzN8clzejkNSEy-SjAFmTOVPDXyPNFwE7PkTI5WVo_bGfuw5Iyuc6O9aSUwVHYctbLr/exec";
const PAGE = 7;
const NEXT_PAGE_URL = "page8.html";
/***** ▲ 설정 끝 ▲ *****/

(function(){
  const qs = new URLSearchParams(location.search);
  const pid = qs.get('pid') || localStorage.getItem('exp_pid') || '';
  const nextBtn = document.getElementById('nextBtn');
  let sending = false;

  // 필수 응답 name들
  const NAMES = [
    's1_q1','s1_q2','s1_q3','s1_q4','s1_q5','s1_q6',
    's2_q1','s2_q2','s2_q3','s2_q4','s2_q5','s2_q6','s2_q7','s2_q8',
    's3_q1','s3_q2','s3_q3','s3_q4','s3_q5','s3_q6','s3_q7','s3_q8','s3_q9','s3_q10','s3_q11','s3_q12'
  ];

  function answeredAll(){
    return NAMES.every(n => document.querySelector(`input[name="${n}"]:checked`));
  }
  function refreshBtn(){ nextBtn.disabled = !answeredAll() || sending; }

  // 이벤트 위임으로 변경 감지(성능)
  document.addEventListener('change', (e)=>{
    if (e.target && e.target.matches('input[type="radio"]')) refreshBtn();
  });
  // 초기 1회 체크
  refreshBtn();

  function collectAnswers(){
    const out = [];
    NAMES.forEach(n => {
      const el = document.querySelector(`input[name="${n}"]:checked`);
      if (!el) return;
      const key = el.dataset.qkey || n.toUpperCase(); // data-qkey 우선
      out.push({ key, value: el.value });
    });
    return out;
  }

  async function sessionUpsert(answers){
    const payload = { type:'SESSION_UPSERT', pid, page: PAGE, answers };
    const res = await fetch(API, {
      method: 'POST',
      headers: { 'Content-Type':'text/plain' }, // 심플 요청
      body: JSON.stringify(payload)
    });
    if (!res.ok) console.warn('SESSION_UPSERT failed:', res.status);
  }

  nextBtn.addEventListener('click', async ()=>{
    if (!answeredAll() || sending) return;
    sending = true; refreshBtn();

    const answers = collectAnswers(); // [{key:'P7_S1_Q1', value:'3'}, ...]
    try { await sessionUpsert(answers); } catch(e) { console.warn(e); }

    const next = `${NEXT_PAGE_URL}?pid=${encodeURIComponent(pid)}`;
    location.href = next;
  });
})();
</script>
</body>
</html>
